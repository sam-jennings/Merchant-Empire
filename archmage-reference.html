<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archmage Ascension - Quick Reference</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cormorant+Garamond:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="archmage-theme.css">
    <script src="config.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ARCHMAGE ASCENSION</h1>
            <div class="subtitle">Quick Reference</div>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="showTab('setup')">Setup</button>
            <button class="tab" onclick="showTab('spells')">Spells</button>
            <button class="tab" onclick="showTab('turn')">Turn Structure</button>
            <button class="tab" onclick="showTab('casting')">Casting</button>
            <button class="tab" onclick="showTab('wildmagic')">Wild Magic</button>
            <button class="tab" onclick="showTab('scoring')">Simple Scoring</button>
            <button class="tab" onclick="showTab('trials')">Ascension Trials</button>
        </div>

        <!-- SETUP TAB -->
        <div id="setup" class="tab-content active">
            <div class="grid">
                <div class="card">
                    <div class="card-icon">üé¥</div>
                    <h3>Deck Selection</h3>
                    <ul>
                        <li><span class="highlight">2-3 players:</span> 1-14 values (60 cards)</li>
                        <li><span class="highlight">4-5 players:</span> 1-17 values (72 cards)</li>
                        <li><span class="highlight">6-7 players:</span> 1-20 values (84 cards)</li>
                    </ul>
                    <p style="margin-top: 1rem; font-size: 0.95rem; color: var(--text-dim);">4 elements √ó values + 4 wilds</p>
                </div>

                <div class="card">
                    <div class="card-icon">üÉè</div>
                    <h3>Starting Components</h3>
                    <ul>
                        <li><span class="highlight">2-3 players:</span> 7 cards each</li>
                        <li><span class="highlight">4-7 players:</span> 6 cards each</li>
                        <li><span class="highlight">The Exchange:</span> 5 cards face-up</li>
                        <li><span class="highlight">The Vault:</span> Remaining cards face-down</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-icon">‚ö°</div>
                    <h3>Initial Sacrifice</h3>
                    <p>Before the first turn begins:</p>
                    <div class="phase-box" style="margin-top: 1rem;">
                        <p><span class="highlight">Each player</span> simultaneously discards 1 component to Used Components</p>
                    </div>
                    <p style="margin-top: 1rem; font-size: 0.95rem; color: var(--text-dim);">This guarantees sufficient Wild Magic for final preparations</p>
                </div>

                <div class="card">
                    <div class="card-icon">üîÆ</div>
                    <h3>Starting Counters</h3>
                    <p>Each player takes <span class="highlight">1 counter</span></p>
                    <p style="margin-top: 1rem;">Counters represent your magical capacity for:</p>
                    <ul style="margin-top: 0.5rem;">
                        <li>Casting spells</li>
                        <li>Taking learning actions</li>
                    </ul>
                </div>

                <div class="card wide-card">
                    <div class="card-icon">üåü</div>
                    <h3>The Four Elements</h3>
                    <div class="element-symbols" id="element-symbols-container">
                        <!-- Dynamically populated from config.js -->
                    </div>
                    <div class="note">
                        Each card is a <strong>magical component</strong>: Element (suit) + Type (value 1-20)
                    </div>
                </div>
            </div>
        </div>

        <!-- SPELLS TAB -->
        <div id="spells" class="tab-content">
            <div class="grid">
                <div class="card">
                    <div class="card-icon">üîÆ</div>
                    <h3>Conjuration</h3>
                    <p><span class="accent-text">Same Element</span></p>
                    
                    <h4>Requirements</h4>
                    <p>3+ components of the same element</p>
                    
                    <h4>Benefit When Cast</h4>
                    <p><span class="highlight">Power Generation:</span> Draw extra components</p>
                    <ul>
                        <li>3-5 components: <span class="highlight">+1 component</span></li>
                        <li>6+ components: <span class="highlight">+2 components</span></li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-icon">üîÑ</div>
                    <h3>Transfiguration</h3>
                    <p><span class="accent-text">Sequential Values</span></p>

                    <h4>Requirements</h4>
                    <p>3+ components in sequence (any elements)</p>

                    <h4>Benefit When Cast</h4>
                    <p><span class="highlight">Transformation Rights:</span> Exchange with The Exchange</p>
                    <ul>
                        <li>3 components: Discard 2, take 1</li>
                        <li>4+ components: Discard 1, take 1</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-icon">‚ö°</div>
                    <h3>Enchantment</h3>
                    <p><span class="accent-text">Matching Values</span></p>

                    <h4>Requirements</h4>
                    <p>3-4 components of the same value</p>

                    <h4>Enchantments & Spell Casting</h4>
                    <p>When you learn an Enchantment, you permanently enhance your capabilities:</p>

                    <p style="margin-top: 1rem;"><strong>3-component Enchantment:</strong></p>
                    <ul>
                        <li>Gain <span class="highlight">+1 counter</span></li>
                        <li>Cast <span class="highlight">1 additional spell</span> per turn</li>
                        <li>Perform <span class="highlight">1 additional learning action</span> per turn</li>
                    </ul>

                    <p style="margin-top: 1rem;"><strong>4-component Enchantment:</strong></p>
                    <ul>
                        <li><span class="highlight">Unlimited casting</span> - cast ALL your spells</li>
                        <li><span class="highlight">Unlimited learning</span> - perform as many learning actions as you want</li>
                        <li>(You no longer need to track counters)</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-icon">‚ú®</div>
                    <h3>Perfect Transmutation</h3>
                    <p><span class="accent-text">Sequential Same Element</span></p>
                    
                    <h4>Requirements</h4>
                    <p>3+ components in sequence of the same element</p>
                    <div class="note">
                        E.g., Fire 8-9-10 (cannot loop)
                    </div>
                    
                    <h4>Benefit When Cast</h4>
                    <p><span class="highlight">Ultimate Power:</span> Grants BOTH</p>
                    <ul>
                        <li>Power Generation (draw extras)</li>
                        <li>Transformation Rights (exchange)</li>
                    </ul>
                    <p style="margin-top: 0.5rem;">Uses only <span class="highlight">1 counter</span> when cast!</p>
                </div>

                <div class="card wide-card">
                    <h3>Key Spell Concepts</h3>
                    <div class="grid" style="margin-top: 1rem;">
                        <div class="phase-box">
                            <h4>Enchantments Don't Need Casting</h4>
                            <p>They're <strong>always active</strong> and automatically provide their benefits</p>
                        </div>
                        <div class="phase-box">
                            <h4>Other Spells Must Be Cast</h4>
                            <p>Place counters on them at turn start to activate their benefits</p>
                        </div>
                        <div class="phase-box">
                            <h4>Wild Cards</h4>
                            <p>Can substitute for any element/value combination</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TURN STRUCTURE TAB -->
        <div id="turn" class="tab-content">
            <div class="grid">
                <div class="card">
                    <div class="card-icon">üéØ</div>
                    <h3>1. Cast Spells</h3>
                    <p>Choose which spells to cast this turn</p>

                    <h4>Place Counters on Spells</h4>
                    <ul>
                        <li>Base: 1 spell (1 counter)</li>
                        <li>Each 3-component Enchantment: +1 spell (+1 counter)</li>
                        <li>4-component Enchantment: Cast all spells (unlimited)</li>
                    </ul>

                    <div class="note" style="margin-top: 1rem;">
                        Enchantments don't need to be cast - they're always active!
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üì•</div>
                    <h3>2. Collection Phase</h3>

                    <h4>Base Acquisition (choose one)</h4>
                    <ul>
                        <li>Draw 1 from The Vault, OR</li>
                        <li>Take 1 from The Exchange (replace it)</li>
                    </ul>

                    <h4>Power Generation (automatic)</h4>
                    <p>Draw additional components from The Vault based on your <span class="highlight">cast Conjurations</span></p>
                    <div class="note" style="margin-top: 1rem;">
                        Example: Cast 6-card Conjuration = 1 base + 2 bonus = 3 total components
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üîÑ</div>
                    <h3>3. Transform Phase</h3>

                    <p>Use <span class="highlight">cast Transfiguration spells</span> to exchange components</p>

                    <h4>For Each Cast Transfiguration</h4>
                    <ul>
                        <li>3-card: Discard 2 from hand ‚Üí take 1 from Exchange</li>
                        <li>4+-card: Discard 1 from hand ‚Üí take 1 from Exchange</li>
                    </ul>

                    <div class="note" style="margin-top: 1rem;">
                        Discarded components go to Used Components<br>
                        Immediately replace Exchange cards from The Vault
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üìö</div>
                    <h3>4. Learn Phase</h3>

                    <p><span class="highlight">After casting, return counters to your pool.</span> Use them for learning actions to build your Spellbook.</p>

                    <h4>Learning Actions Available</h4>
                    <ul>
                        <li>Base: 1 action</li>
                        <li>Each 3-component Enchantment: +1 action</li>
                        <li>4-component Enchantment: Unlimited actions</li>
                    </ul>

                    <h4>Learning Actions (each costs 1 action)</h4>
                    <ul>
                        <li><span class="highlight">LEARN:</span> Add a new spell from components to Spellbook (learning 3-card Enchantment gives +1 permanent counter)</li>
                        <li><span class="highlight">EMPOWER:</span> Add components to an existing spell</li>
                        <li><span class="highlight">RESHAPE:</span> Break down and rebuild any/all spells using the same components (counts as one action)</li>
                        <li><span class="highlight">UNLEARN:</span> Dissolve a spell, returning components to hand (can't learn them this turn)</li>
                    </ul>

                    <div class="note" style="margin-top: 1rem;">
                        <strong>Reshape Example:</strong> Convert Earth 4-5-6, Fire 4-5-6, Water 4-5-6 (three Perfect Transmutations) into Earth-4/Fire-4/Water-4, Earth-5/Fire-5/Water-5, Earth-6/Fire-6/Water-6 (three Enchantments granting +3 counters total).
                    </div>
                </div>
            </div>
        </div>

        <!-- CASTING TAB -->
        <div id="casting" class="tab-content">
            <div class="grid">
                <div class="card wide-card">
                    <div class="card-icon">‚ö°</div>
                    <h3>Understanding Counters</h3>
                    <div class="grid" style="margin-top: 1rem;">
                        <div class="phase-box">
                            <h4>At Turn Start</h4>
                            <p>Counters represent <strong>spells you can cast</strong></p>
                            <p style="margin-top: 0.5rem;">Place them on spells to activate their benefits</p>
                        </div>
                        <div class="phase-box">
                            <h4>During Learn Phase</h4>
                            <p>Same counters represent <strong>learning actions available</strong></p>
                            <p style="margin-top: 0.5rem;">Use them to Learn/Empower/Reshape</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üé≤</div>
                    <h3>Enchantments & Counters</h3>

                    <p>When you learn an Enchantment, you permanently enhance your capabilities:</p>

                    <p style="margin-top: 1rem;"><strong>3-component Enchantment:</strong></p>
                    <ul>
                        <li>Gain <span class="highlight">+1 counter</span></li>
                        <li>Cast <span class="highlight">1 additional spell</span> per turn</li>
                        <li>Perform <span class="highlight">1 additional learning action</span> per turn</li>
                    </ul>

                    <p style="margin-top: 1rem;"><strong>4-component Enchantment:</strong></p>
                    <ul>
                        <li><span class="highlight">Unlimited casting</span> - cast ALL your spells</li>
                        <li><span class="highlight">Unlimited learning</span> - perform as many learning actions as you want</li>
                        <li>(You no longer need to track counters)</li>
                    </ul>

                    <div class="note" style="margin-top: 1rem;">
                        <strong>Example:</strong> With 3 three-component Enchantments, you have 4 total counters (1 base + 3 bonus)
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üéØ</div>
                    <h3>Strategic Casting</h3>
                    
                    <p>Example with 2 counters:</p>
                    <div class="phase-box" style="margin-top: 1rem;">
                        <p><strong>Option 1:</strong> Cast 2 Conjurations ‚Üí Maximum gathering</p>
                        <p style="margin-top: 0.5rem;"><strong>Option 2:</strong> Cast 1 Conjuration + 1 Transfiguration ‚Üí Gathering + transforming</p>
                    </div>
                    
                    <div class="note" style="margin-top: 1rem;">
                        <strong>Perfect Transmutation</strong> uses only 1 counter but grants both benefits!
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üí´</div>
                    <h3>Enchantments Special Rules</h3>
                    
                    <ul>
                        <li><span class="highlight">Always active</span> - no casting needed</li>
                        <li><span class="highlight">Don't use counters</span> for activation</li>
                        <li><span class="highlight">Automatically boost</span> your capacity</li>
                        <li><span class="highlight">Stack with each other</span></li>
                    </ul>
                    
                    <div class="note" style="margin-top: 1rem;">
                        3 three-component Enchantments = 4 total counters (1 base + 3 bonus)
                    </div>
                </div>
            </div>
        </div>

        <!-- WILD MAGIC TAB -->
        <div id="wildmagic" class="tab-content">
            <div class="grid">
                <div class="card wide-card">
                    <div class="card-icon">üåä</div>
                    <h3>Wild Magic Surge</h3>
                    
                    <h4>When It Happens</h4>
                    <p>The instant <span class="highlight">The Vault empties</span>, Wild Magic erupts!</p>
                    
                    <div class="note" style="margin-top: 1rem;">
                        <strong>Why the Initial Sacrifice matters:</strong> The component each player discarded at game start guarantees there will be sufficient Wild Magic for final preparations before the Ascension Trial.
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üîÄ</div>
                    <h3>Creating Wild Magic Surge</h3>
                    
                    <h4>Setup</h4>
                    <ol>
                        <li>Shuffle <span class="highlight">The Exchange</span> together with <span class="highlight">Used Components</span></li>
                        <li>This forms the <span class="highlight">Wild Magic Surge</span> pile</li>
                        <li>Keep turn order as normal</li>
                    </ol>
                    
                    <div class="note" style="margin-top: 1rem;">
                        There is no Exchange during this phase
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">‚ö°</div>
                    <h3>Modified Turn Structure</h3>
                    
                    <h4>Before Turn: Choose Spells to Cast</h4>
                    <p>Place counters as normal, but benefits are limited (see below)</p>
                    
                    <h4>Collection Phase</h4>
                    <p>Draw <span class="highlight">exactly 1 component</span> from Wild Magic Surge</p>
                    <ul style="margin-top: 0.5rem;">
                        <li>Ignore base acquisition options</li>
                        <li>Ignore all Conjuration bonuses</li>
                    </ul>
                    
                    <h4>Transform Phase</h4>
                    <p><span class="highlight">No transformations</span> - The Exchange has collapsed</p>
                    
                    <h4>Learn Phase</h4>
                    <p><span class="highlight">Unchanged</span> - use learning actions normally</p>
                </div>

                <div class="card wide-card">
                    <div class="card-icon">‚ö†Ô∏è</div>
                    <h3>Why Cast Spells Lose Effectiveness</h3>
                    <p>When Wild Magic erupts, the fundamental structure of magical reality destabilizes:</p>
                    <div class="grid" style="margin-top: 1rem;">
                        <div class="phase-box">
                            <h4>‚ùå Conjurations</h4>
                            <p><strong>No bonus draws</strong> - There are no stable elemental sources to draw from; all magic is chaotic and uncontrolled</p>
                        </div>
                        <div class="phase-box">
                            <h4>‚ùå Transfigurations</h4>
                            <p><strong>No transformations</strong> - The Exchange has collapsed; there's nowhere to perform careful transformations</p>
                        </div>
                        <div class="phase-box">
                            <h4>‚úÖ Enchantments</h4>
                            <p><strong>Still work!</strong> - As permanent self-enhancements, Enchantments continue to boost your learning capacity and casting ability even amid chaos</p>
                        </div>
                    </div>
                    
                    <div class="note" style="margin-top: 1rem;">
                        You can still cast spells during this phase (place counters on them if you wish), but only Enchantments provide their normal benefits. Conjurations and Transfigurations remain inert until the trial.
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üèÅ</div>
                    <h3>Game End</h3>
                    
                    <p>When the <span class="highlight">Wild Magic Surge pile is depleted</span>, proceed immediately to your chosen end-game method:</p>
                    
                    <div class="phase-box" style="margin-top: 1rem;">
                        <h4>Option 1: Simple Scoring</h4>
                        <p>Tally Recognition Points from all spells</p>
                    </div>
                    
                    <div class="phase-box">
                        <h4>Option 2: The Ascension Trial (Recommended)</h4>
                        <p>Face six magical challenges to prove your mastery</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SIMPLE SCORING TAB -->
        <div id="scoring" class="tab-content">
            <div class="grid">
                <div class="card wide-card">
                    <div class="card-icon">üìä</div>
                    <h3>Simple Evaluation</h3>
                    <p><span class="accent-text">For Casual/Quick Play</span></p>
                    
                    <p style="margin-top: 1rem;">This is a faster, less competitive scoring method suitable for casual play or when you want to avoid the strategic depth of the Ascension Trial.</p>
                    
                    <h4 style="margin-top: 1.5rem;">How to Win</h4>
                    <ol>
                        <li>Tally <span class="highlight">Recognition Points</span> from all spells in your Spellbook</li>
                        <li>Player with <span class="highlight">most Recognition Points wins</span></li>
                    </ol>
                    
                    <h4>Tiebreakers (in order)</h4>
                    <ol>
                        <li>Most spells</li>
                        <li>Most components in largest single spell</li>
                    </ol>
                </div>

                <div class="card wide-card">
                    <h3>Recognition Points by Spell Size</h3>
                    <div class="table-wrap">
                        <table id="recognition-points-table">
                            <!-- Dynamically populated from config.js -->
                        </table>
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üìù</div>
                    <h3>Scoring Example</h3>
                    
                    <h4>Your Spellbook</h4>
                    <ul>
                        <li>5-component Conjuration = <span class="highlight">9 points</span></li>
                        <li>4-component Transfiguration = <span class="highlight">8 points</span></li>
                        <li>3-component Enchantment = <span class="highlight">6 points</span></li>
                        <li>6-component Perfect Transmutation = <span class="highlight">23 points</span></li>
                    </ul>
                    
                    <div class="phase-box" style="margin-top: 1rem;">
                        <h4>Total: 46 Recognition Points</h4>
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">üí°</div>
                    <h3>Quick Tips</h3>
                    
                    <ul>
                        <li><span class="highlight">Perfect Transmutations</span> score the highest per component</li>
                        <li><span class="highlight">4-component Enchantments</span> have a huge scoring spike (14 points)</li>
                        <li>Longer spells score <span class="highlight">exponentially better</span> than multiple short ones</li>
                        <li>A single 7-component spell often scores more than two 4-component spells</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ASCENSION TRIALS TAB -->
        <div id="trials" class="tab-content">
            <div class="grid">
                <div class="card wide-card">
                    <div class="card-icon">üèÜ</div>
                    <h3>The Ascension Trial</h3>
                    <p><span class="accent-text">Recommended End Game Method</span></p>
                    
                    <p style="margin-top: 1rem; font-size: 1.1rem;">A strategic, interactive finale that rewards how you built your magical power. The wizard who demonstrates the greatest mastery across six magical challenges becomes THE Archmage.</p>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <a href="trials.html" style="
                            display: inline-block;
                            padding: 1.5rem 3rem;
                            background: linear-gradient(135deg, var(--gold) 0%, var(--accent) 100%);
                            color: var(--primary);
                            text-decoration: none;
                            font-family: 'Cinzel', serif;
                            font-size: 1.3rem;
                            font-weight: 700;
                            letter-spacing: 0.1em;
                            border-radius: 8px;
                            box-shadow: 0 8px 32px rgba(246, 201, 74, 0.4);
                            transition: all 0.3s ease;
                        " onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 40px rgba(246, 201, 74, 0.6)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 32px rgba(246, 201, 74, 0.4)'">
                            LAUNCH ASCENSION TRIAL ‚ö°
                        </a>
                    </div>
                    
                    <div class="note">
                        <strong>The trials.html app handles all calculations automatically</strong> - power domains, allocations, tie-breakers, and winner determination. Just enter your spells and make your strategic choices!
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">‚öóÔ∏è</div>
                    <h3>Overview</h3>
                    
                    <h4>The Process</h4>
                    <ol>
                        <li>Calculate <span class="highlight">Power</span> from each domain based on your spells</li>
                        <li>Secretly allocate Power to <span class="highlight">6 Trials</span></li>
                        <li>Reveal simultaneously</li>
                        <li>Highest legal power wins each Trial's Recognition Points</li>
                    </ol>
                </div>

                <div class="card">
                    <div class="card-icon">üî•</div>
                    <h3>Power Calculation</h3>

                    <div class="formula" id="power-formula">
                        <!-- Dynamically populated from config.js -->
                    </div>

                    <h4 style="margin-top: 1rem;">Examples</h4>
                    <div class="table-wrap">
                        <table style="margin-top: 0.5rem;" id="power-examples-table">
                            <!-- Dynamically populated from config.js -->
                        </table>
                    </div>
                </div>

                <div class="card wide-card">
                    <div class="card-icon">üí´</div>
                    <h3>Power Domains</h3>
                    <div class="grid" style="margin-top: 1rem;">
                        <div class="phase-box">
                            <h4>Elemental Power</h4>
                            <p>Combined length of <span class="highlight">Conjurations</span> in each element</p>
                            <p style="margin-top: 0.5rem; font-size: 0.95rem; color: var(--text-dim);">Four separate domains (Earth, Fire, Water, Air)</p>
                        </div>
                        <div class="phase-box">
                            <h4>Transformation Power</h4>
                            <p>Total length of all <span class="highlight">Transfiguration</span> spells</p>
                            <p style="margin-top: 0.5rem; font-size: 0.95rem; color: var(--text-dim);">Perfect Transmutations count as Transfigurations</p>
                        </div>
                        <div class="phase-box">
                            <h4>Enchantment Power</h4>
                            <p>Total size of all <span class="highlight">Enchantments</span></p>
                            <p style="margin-top: 0.5rem; font-size: 0.95rem; color: var(--text-dim);">Sum of all Enchantment component counts</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">‚ú®</div>
                    <h3>Wild Magic Power</h3>
                    
                    <p>Bonus allocation flexibility:</p>
                    
                    <h4>Sources</h4>
                    <ul>
                        <li>Each Perfect Transmutation: <span class="highlight">+1 wild magic</span></li>
                        <li>Each 4-component Enchantment: <span class="highlight">+1 wild magic</span></li>
                    </ul>
                    
                    <h4>Rules</h4>
                    <ul>
                        <li>Only add to trials you're already attempting (with ‚â•1 normal power)</li>
                        <li>Doesn't count as a domain source</li>
                        <li>Affects total only (not tie-breakers)</li>
                    </ul>
                </div>

                <div class="card wide-card">
                    <div class="card-icon">üéØ</div>
                    <h3>The Six Trials</h3>
                    <div class="table-wrap">
                        <table id="trials-table">
                            <!-- Dynamically populated from config.js -->
                        </table>
                    </div>
                </div>

                <div class="card wide-card">
                    <h3>Recognition Points by Player Count</h3>

                    <div class="table-wrap">
                        <table style="margin-bottom: 1.5rem;" id="recognition-by-players-table">
                            <!-- Dynamically populated from config.js -->
                        </table>
                    </div>

                    <div class="note">
                        <strong>5-7 Players:</strong> Add a 7th trial (<strong>Complete Mastery</strong> - requires all 3 domain types). Both 1st and 2nd place score in 6-7 player games. See the trials.html app for complete scoring tables.
                    </div>
                </div>

                <div class="card">
                    <div class="card-icon">‚öñÔ∏è</div>
                    <h3>Tie-Breakers</h3>
                    
                    <p>When trials tie, resolve in order:</p>
                    
                    <ol style="margin-top: 1rem;">
                        <li><span class="highlight">Utilization:</span> Power used √∑ Total capacity of domains used</li>
                        <li><span class="highlight">Focus:</span> Power on this trial √∑ Total power across all domains</li>
                        <li><span class="highlight">Breadth:</span> More distinct sources (Harmony/Universal only)</li>
                        <li><span class="highlight">Shared Recognition:</span> Both players get full points</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Populate content from config.js when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const config = typeof GameConfig !== 'undefined' ? GameConfig : null;

            if (!config) {
                console.warn('GameConfig not loaded, using fallback content');
                return;
            }

            // Populate element symbols
            populateElementSymbols(config);

            // Populate power formula and examples
            populatePowerCalculation(config);

            // Populate recognition points table (needs to be added to config)
            populateRecognitionPointsTable();

            // Populate trials table
            populateTrialsTable(config);

            // Populate recognition points by player count
            populateRecognitionByPlayersTable(config);
        });

        function populateElementSymbols(config) {
            const container = document.getElementById('element-symbols-container');
            if (!container || !config.elements) return;

            container.innerHTML = config.elements.map(el => `
                <div class="element">
                    <span class="element-icon">${el.symbol}</span>
                    <span><span class="highlight">Spades:</span> ${el.name}</span>
                </div>
            `).join('');
        }

        function populatePowerCalculation(config) {
            const formulaDiv = document.getElementById('power-formula');
            const examplesTable = document.getElementById('power-examples-table');

            if (!formulaDiv || !examplesTable) return;

            // Use config formula description or fallback
            const formulaDesc = config.powerFormulaDescription || '3-4 components √ó1, 5-6 components √ó1.5, 7+ components √ó2';
            formulaDiv.textContent = formulaDesc;

            // Generate examples
            const calcPower = config.calculatePower || ((size) => {
                if (size <= 4) return size * 1;
                if (size <= 6) return Math.round(size * 1.5);
                return size * 2;
            });

            const examples = [3, 5, 7];
            examplesTable.innerHTML = examples.map(size => {
                const power = calcPower(size);
                const breakdown = config.getPowerBreakdown ?
                    config.getPowerBreakdown(size, calcPower) :
                    `${size} components = ${power} power`;
                return `<tr><td>${size} components</td><td>= ${breakdown}</td></tr>`;
            }).join('');
        }

        function populateRecognitionPointsTable() {
            const table = document.getElementById('recognition-points-table');
            if (!table) return;

            const config = typeof GameConfig !== 'undefined' ? GameConfig : null;
            const rpBySize = config?.recognitionPointsBySpellSize;

            // Fallback data if config not available
            const rpData = rpBySize ? null : {
                3: { conj: 4, trans: 5, ench: 6, perfect: 7 },
                4: { conj: 6, trans: 8, ench: 14, perfect: 11 },
                5: { conj: 9, trans: 12, ench: '‚Äî', perfect: 16 },
                6: { conj: 13, trans: 17, ench: '‚Äî', perfect: 23 },
                7: { conj: 18, trans: 23, ench: '‚Äî', perfect: 32 },
                8: { conj: 24, trans: 30, ench: '‚Äî', perfect: 42 },
                9: { conj: 31, trans: 38, ench: '‚Äî', perfect: 54 },
                10: { conj: 39, trans: 47, ench: '‚Äî', perfect: 68 },
                11: { conj: 48, trans: 57, ench: '‚Äî', perfect: 84 },
                12: { conj: 58, trans: 68, ench: '‚Äî', perfect: 102 }
            };

            const thead = `
                <thead>
                    <tr>
                        <th>Size</th>
                        <th>Conjuration</th>
                        <th>Transfiguration</th>
                        <th>Enchantment</th>
                        <th>Perfect Transmutation</th>
                    </tr>
                </thead>
            `;

            let tbody;
            if (rpBySize) {
                // Use config data
                const sizes = [3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
                tbody = '<tbody>' + sizes.map(size => `
                    <tr>
                        <td>${size}</td>
                        <td>${rpBySize.conjuration[size] || '‚Äî'}</td>
                        <td>${rpBySize.transfiguration[size] || '‚Äî'}</td>
                        <td>${rpBySize.enchantment[size] || '‚Äî'}</td>
                        <td>${rpBySize['perfect-transmutation'][size] || '‚Äî'}</td>
                    </tr>
                `).join('') + '</tbody>';
            } else {
                // Use fallback data
                tbody = '<tbody>' + Object.entries(rpData).map(([size, values]) => `
                    <tr>
                        <td>${size}</td>
                        <td>${values.conj}</td>
                        <td>${values.trans}</td>
                        <td>${values.ench}</td>
                        <td>${values.perfect}</td>
                    </tr>
                `).join('') + '</tbody>';
            }

            table.innerHTML = thead + tbody;
        }

        function populateTrialsTable(config) {
            const table = document.getElementById('trials-table');
            if (!table || !config.trials) return;

            // Trial descriptions mapping
            const trialInfo = {
                'elemental-purity': { req: 'Exactly one elemental domain', proves: 'Unmatched mastery of a single element' },
                'elemental-harmony': { req: '2+ different elemental domains', proves: 'Ability to harmonize multiple elements' },
                'transformation': { req: 'Transformation domain only', proves: 'Superior transformation mastery' },
                'enchantment': { req: 'Enchantment domain only', proves: 'Mastery of enduring enchantments' },
                'focused-power': { req: 'Exactly one domain (any type)', proves: 'True mastery through specialization' },
                'universal-power': { req: '2+ different domains (any mix)', proves: 'Versatility needed to lead all wizards' }
            };

            const thead = `
                <thead>
                    <tr>
                        <th>Trial</th>
                        <th>Requirements</th>
                        <th>What Winning Proves</th>
                    </tr>
                </thead>
            `;

            const tbody = '<tbody>' + config.trials.map(trial => {
                const info = trialInfo[trial.id] || { req: trial.description, proves: '‚Äî' };
                return `
                    <tr>
                        <td><strong>${trial.name}</strong></td>
                        <td>${info.req}</td>
                        <td>${info.proves}</td>
                    </tr>
                `;
            }).join('') + '</tbody>';

            table.innerHTML = thead + tbody;
        }

        function populateRecognitionByPlayersTable(config) {
            const table = document.getElementById('recognition-by-players-table');
            if (!table || !config.recognitionPoints) return;

            const playerCounts = Object.keys(config.recognitionPoints).sort();
            const trialOrder = [
                'elemental-purity',
                'elemental-harmony',
                'transformation',
                'enchantment',
                'focused-power',
                'universal-power'
            ];

            const trialNames = {
                'elemental-purity': 'Elemental Purity',
                'elemental-harmony': 'Elemental Harmony',
                'transformation': 'Transformation',
                'enchantment': 'Enchantment',
                'focused-power': 'Focused Power',
                'universal-power': 'Universal Power'
            };

            const thead = `
                <thead>
                    <tr>
                        <th>Trial</th>
                        ${playerCounts.map(count => `<th>${count} Players</th>`).join('')}
                    </tr>
                </thead>
            `;

            let totalsByCount = {};
            playerCounts.forEach(count => totalsByCount[count] = 0);

            const tbody = '<tbody>' + trialOrder.map(trialId => {
                const points = playerCounts.map(count => {
                    const value = config.recognitionPoints[count][trialId] || 0;
                    totalsByCount[count] += value;
                    return `<td>${value}</td>`;
                }).join('');

                return `<tr><td>${trialNames[trialId]}</td>${points}</tr>`;
            }).join('') +
            `<tr style="background: rgba(246, 201, 74, 0.1);">
                <td><strong>Total Pool</strong></td>
                ${playerCounts.map(count => `<td><strong>${totalsByCount[count]}</strong></td>`).join('')}
            </tr>` +
            '</tbody>';

            table.innerHTML = thead + tbody;
        }
    </script>
</body>
</html>
